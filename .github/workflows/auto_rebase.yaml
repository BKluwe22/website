name: Auto-Update Base

on:
  push:
    branches:
      - main
#  schedule:
#    - cron: "0 3 * * *"

jobs:
  update_base:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          submodules: recursive

      - name: Update Server Base
        run: |
          cd ./server \
          && git fetch upstream \
          && git rebase upstream/main \
          && git add ./ \
          && git commit -m "Rebased Server" \
          && git push origin main

      - name: Mono Add
        run: |
          cd ../ \
          && git add ./server \
          && git commit -m "Rebased Server" \
          && git push origin main

